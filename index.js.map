{"version":3,"file":"index.js","sources":["../src/js/omdb-api.js","../src/js/rebder-funstoins.js","../src/main.js"],"sourcesContent":["// Імпорт бібліотеки Axios для роботи з HTTP-запитами\nimport axios from \"axios\";\n\n// Встановлення базової URL-адреси для всіх запитів\nconst BASE_URL = 'https://www.omdbapi.com';\nconst API_KEY = '60586037';\n\n// Отримання даних із Pixabay API на основі запиту користувача\nexport default async function fetchMovies (requestWord, page =1) {\n\n    // Формування параметрів запиту\n   \n\n    try {\n        const response = await axios.get(`${BASE_URL}`, {\n            params: {\n                apikey: API_KEY,\n                s: requestWord,\n                page: page,\n             }\n        });\n\n        console.log(\"API response:\", response.data);\n\n        if (response.data.Response === 'False') {\n            throw new Error(response.data.Error || 'No movies found');\n        }\n        return response.data;\n    }\n    // Прокидування помилки для обробки в основному коді\n    catch (error) {\n        console.log('Error fetching movies:', error.message);\n        throw error;\n    }\n}","// Імпорт бібліотеки SimpleLightbox\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nlet lightbox;\n\n// Ініціалізація SimpleLightbox для перегляду великих зображень у галереї\nexport function initLightbox() {\n    lightbox = new SimpleLightbox('.gallery a', {\n    captions: true,\n    captionsData: 'alt',\n    captionType: 'attr',\n    captionDelay: 250,\n    animationSpeed: 350,\n    captionPosition: 'bottom',\n    });\n    \n    // Обробка подій SimpleLightbox\n    lightbox.on('show.simplelightbox', function () { });\n    \n    lightbox.on('error.simplelightbox', function (e) {\n        console.log(e);\n    });\n\n    return lightbox;\n}\n\n// Створення HTML-розмітки для однієї картки з фільмом\nexport function createMovieCard(movie) {\n  const {\n    Title,\n    Year,\n    imdbID,\n    Type,\n    Poster\n  } = movie;\n\n  const posterSrc = Poster !== 'N/A' ? Poster : \"https://via.placeholder.com/200x300?text=No+Image\";\n\n  return `\n    <li class=\"movie-card\">\n            <img src=\"${posterSrc}\" alt=\"${Title}\" class=\"movie-poster\">\n            <h3 class=\"movie-title\">${Title}</h3>\n            <p class=\"movie-info\">Year: ${Year} | Type: ${Type}</p>\n        </li>\n  `;\n}\n","// Імпорт бібліотеки iziToast\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\n// Імпорт бібліоткеки Axios\nimport axios from \"axios\";\n\n// Імпорт модулів\nimport fetchMovies from './js/omdb-api';\nimport { initLightbox, createMovieCard } from './js/rebder-funstoins';\n\nconst form = document.querySelector('.form');\nconst input = document.querySelector('.js-input');\nconst gallery = document.querySelector('.gallery');\nconst loaderInit = document.querySelector('.initial-loader');\nconst loaderAdd = document.querySelector('.aditional-loader');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\nconst lightbox = initLightbox();\n\nlet currentSearchQuery = '';\nlet page = 1;\nlet totalPages = 0;\n\n// // Показати loader\nfunction showLoader(loader) {\n    loader.classList.remove('visually-hidden');\n}\n\n// Приховати loader\nfunction hideLoader(loader) {\n    loader.classList.add('visually-hidden');\n}\n\n// Показати кнопку додаткової загрузки\nfunction showLoadMoreBtn() {\n    loadMoreBtn.classList.remove('visually-hidden');\n}\n\n// Призовати кнопку додаткової загрузки\nfunction hideLoadMoreBtn() {\n    loadMoreBtn.classList.add('visually-hidden');\n}\n\n// Повідомлення\nconst errorMessage = {\n    message: 'Sorry, there are no movies matching your search query. Please try again!',\n    messageColor: '#fff',\n    backgroundColor: '#ef4040',\n    position: 'topRight',\n}\n\nconst warning = {\n    message: 'Enter your search request!',\n    messageColor: '#000',\n    backgroundColor: '#f5c386',\n    position:'topRight',\n}\n\nconst info = {\n    message: `We're sorry, but you've reached the end of search results.`,\n    messageColor: '#000',\n    backgroundColor: '#78afe0',\n    position:'topRight',\n}\n\n// // Обробка пошуку\nform.addEventListener('submit', async event => {\n    event.preventDefault();\n\n    const request = input.value.trim();\n    if (request === '') {\n        gallery.innerHTML = '';\n        iziToast.warning(warning);\n        return;\n    }\n\n    // Новий запит пошуку / скидування сторінки\n    currentSearchQuery = request;\n    page = 1;\n    totalPages = 0;\n    gallery.innerHTML = '';\n\n    try {\n        const data = await fetchMovies(request, page);\n        console.log('API response:', data);\n\n        const movies = data?.Search ?? [];\n\n        if (movies.length === 0) {\n            iziToast.error(errorMessage);\n            return;\n        }\n\n        totalPages = Math.ceil(Number(data.totalResults) /10);\n\n        gallery.innerHTML = movies.map(createMovieCard).join('');\n\n        if (page < totalPages) {\n            showLoadMoreBtn();\n        }\n    }\n    catch (error) {\n        iziToast.error(errorMessage);\n        console.log('Error request:', error);\n    }\n    finally {\n        input.value = '';\n    }\n})\n\n// // Завантаження додаткових фільмів\nloadMoreBtn.addEventListener('click', async () => {\n    page += 1;\n    hideLoadMoreBtn();\n    showLoader(loaderAdd);\n\n    try {\n        const data = await fetchMovies(currentSearchQuery, page);\n        const movies = data?.Search ?? [];\n        \n        if (movies.length === 0) {\n            hideLoadMoreBtn();\n            iziToast.error(errorMessage);\n            return;\n        }\n\n        gallery.insertAdjacentHTML('beforeend', movies.map(createMovieCard).join(''));\n\n        // Плавний скрол до нових карток\n        const { height: cardHeight } = gallery.firstElementChild.getBoundingClientRect();\n        window.scrollBy({\n            top: cardHeight * 1.7,\n            behavior: 'smooth',\n        });\n\n        if (page * 10 >= totalPages) {\n            iziToast.info(info);\n            hideLoadMoreBtn();\n        }\n        else {\n            showLoadMoreBtn();\n        }\n    }\n    catch (error) {\n        iziToast.error(errorMessage);\n        console.log('Error loading more:', error);\n    }\n    finally {\n        hideLoader(loaderAdd);\n    }\n})\n\nconst scrollToTopBtn = document.getElementById('scrollToTopBtn');\n\n// Показуємо/ховаємо кнопку при скролі\nwindow.addEventListener('scroll', () => {\n    if (window.scrollY > 300) { // Показати, якщо прокрутили більше 300px\n        scrollToTopBtn.classList.remove('visually-hidden');\n    } else {\n        scrollToTopBtn.classList.add('visually-hidden');\n    }\n});\n\n// Плавний скрол на початок сторінки при кліку\nscrollToTopBtn.addEventListener('click', () => {\n    window.scrollTo({\n        top: 0,\n        behavior: 'smooth'\n    });\n});"],"names":["BASE_URL","API_KEY","fetchMovies","requestWord","page","response","axios","error","lightbox","initLightbox","SimpleLightbox","e","createMovieCard","movie","Title","Year","imdbID","Type","Poster","form","input","gallery","loaderAdd","loadMoreBtn","currentSearchQuery","totalPages","showLoader","loader","hideLoader","showLoadMoreBtn","hideLoadMoreBtn","errorMessage","warning","info","event","request","iziToast","data","movies","cardHeight","scrollToTopBtn"],"mappings":"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"}