import{a as S,S as E,i}from"./assets/vendor-BjRz3xa9.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))n(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function e(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerPolicy&&(s.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?s.credentials="include":t.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(t){if(t.ep)return;t.ep=!0;const s=e(t);fetch(t.href,s)}})();const T="https://www.omdbapi.com",M="60586037";async function v(o,r=1){try{const e=await S.get(`${T}`,{params:{apikey:M,s:o,page:r}});if(console.log("API response:",e.data),e.data.Response==="False")throw new Error(e.data.Error||"No movies found");return e.data}catch(e){throw console.log("Error fetching movies:",e.message),e}}let d;function q(){return d=new E(".gallery a",{captions:!0,captionsData:"alt",captionType:"attr",captionDelay:250,animationSpeed:350,captionPosition:"bottom"}),d.on("show.simplelightbox",function(){}),d.on("error.simplelightbox",function(o){console.log(o)}),d}function L(o){const{Title:r,Year:e,imdbID:n,Type:t,Poster:s}=o;return`
    <li class="movie-card">
            <img src="${s!=="N/A"?s:"https://via.placeholder.com/200x300?text=No+Image"}" alt="${r}" class="movie-poster">
            <h3 class="movie-title">${r}</h3>
            <p class="movie-info">Year: ${e} | Type: ${t}</p>
        </li>
  `}const P=document.querySelector(".form"),g=document.querySelector(".js-input"),c=document.querySelector(".gallery");document.querySelector(".initial-loader");const y=document.querySelector(".aditional-loader"),h=document.querySelector(".load-more-btn");q();let w="",a=1,u=0;function B(o){o.classList.remove("visually-hidden")}function C(o){o.classList.add("visually-hidden")}function b(){h.classList.remove("visually-hidden")}function f(){h.classList.add("visually-hidden")}const m={message:"Sorry, there are no movies matching your search query. Please try again!",messageColor:"#fff",backgroundColor:"#ef4040",position:"topRight"},x={message:"Enter your search request!",messageColor:"#000",backgroundColor:"#f5c386",position:"topRight"},A={message:"We're sorry, but you've reached the end of search results.",messageColor:"#000",backgroundColor:"#78afe0",position:"topRight"};P.addEventListener("submit",async o=>{o.preventDefault();const r=g.value.trim();if(r===""){c.innerHTML="",i.warning(x);return}w=r,a=1,u=0,c.innerHTML="";try{const e=await v(r,a);console.log("API response:",e);const n=(e==null?void 0:e.Search)??[];if(n.length===0){i.error(m);return}u=Math.ceil(Number(e.totalResults)/10),c.innerHTML=n.map(L).join(""),a<u&&b()}catch(e){i.error(m),console.log("Error request:",e)}finally{g.value=""}});h.addEventListener("click",async()=>{a+=1,f(),B(y);try{const o=await v(w,a),r=(o==null?void 0:o.Search)??[];if(r.length===0){f(),i.error(m);return}c.insertAdjacentHTML("beforeend",r.map(L).join(""));const{height:e}=c.firstElementChild.getBoundingClientRect();window.scrollBy({top:e*1.7,behavior:"smooth"}),a*10>=u?(i.info(A),f()):b()}catch(o){i.error(m),console.log("Error loading more:",o)}finally{C(y)}});const p=document.getElementById("scrollToTopBtn");window.addEventListener("scroll",()=>{window.scrollY>300?p.classList.remove("visually-hidden"):p.classList.add("visually-hidden")});p.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})});
//# sourceMappingURL=index.js.map
